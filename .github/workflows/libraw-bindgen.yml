name: libraw-bindgen
on:
    workflow_dispatch:

jobs:
    libraw-bindings:
        runs-on: ubuntu-latest
        env:
          RUSTFLAGS: "-Dwarnings"
        steps:
          - uses: actions/checkout@v4
          - name: Set up pixi
            uses: prefix-dev/setup-pixi@v0.8.8
            with:
              run-install: false
          - uses: dtolnay/rust-toolchain@stable
          - name: cargo-fmt
            run: |
              scripts/libraw-bindings.ps1
            shell: pwsh
          - name: upload
            uses: actions/upload-artifact@v4
            with:
              name: libraw-bindings
              path: |
                crates/libraw-sys/src/bindings.rs
              if-no-files-found: error

